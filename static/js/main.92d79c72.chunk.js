(this["webpackJsonpmarvel-comics"]=this["webpackJsonpmarvel-comics"]||[]).push([[0],{119:function(e,t,c){},142:function(e,t,c){},145:function(e,t,c){},146:function(e,t,c){},148:function(e,t,c){},149:function(e,t,c){},150:function(e,t,c){},152:function(e,t,c){"use strict";c.r(t);var a={};c.r(a),c.d(a,"setList",(function(){return S})),c.d(a,"setCopyright",(function(){return N})),c.d(a,"setRangeComics",(function(){return E})),c.d(a,"addSelectedComics",(function(){return T})),c.d(a,"removeSelectedComics",(function(){return k})),c.d(a,"clearSelectedComics",(function(){return I})),c.d(a,"setTotal",(function(){return M}));var n=c(0),i=c.n(n),s=c(11),r=c.n(s),l=(c(119),c(34)),o=c(102),j=c(15),d=c(103),m=c(204),b=c(56),u=c(12),h=c(24),O=c(28),x="SET_COMICS",f="SET_COPYRIGHT",p="SET_RANGE_COMICS",g="ADD_SELECTED_COMICS",v="REMOVE_SELECTED_COMICS",C="CLEAR_SELECTED_COMICS",y="SET_TOTAL";function S(e){return{type:x,list:e}}function N(e){return{type:f,text:e}}function E(e,t){return{type:p,first:e,last:t}}function T(e){return{type:g,comics:e}}function k(e){return{type:v,comics:e}}function I(){return{type:C}}function M(e){return{type:y,total:e}}var D=c(58),w=c(59),L=c.n(w),F=L.a.create({baseURL:"https://gateway.marvel.com/v1/public/",headers:{common:{"Content-Type":"application/json; charset=utf-8"}},params:{apikey:"eaa4b4530ed388f981e3dddd6173b064"}}),_=L.a.create({baseURL:"https://hakaino-marvel-comics-api.herokuapp.com/",headers:{common:{"Content-Type":"application/json; charset=utf-8"}}}),A="SEND_MAIL";function P(e,t){return{type:A,status:e,message:t}}var W=c(186),R=c(187),B=c(188),z=c(189),H=c(190),G=c(76),J=c(191),U=c(192),V=c(209),Y=c(193),$=c(208),q=c(153),K=c(184),Q=c(185),X=(c(142),c(99)),Z=c.n(X),ee=c(2),te=function(e){switch(e){case"printPrice":return"Print Price";default:return"Not found"}},ce=function(e){var t=e.comic,c=e.close;return Object(ee.jsxs)(q.a,{elevation:1,className:"comic-model",children:[Object(ee.jsx)("div",{className:"bg-comic",children:Object(ee.jsx)("img",{src:"".concat(t.thumbnail.path,".").concat(t.thumbnail.extension),alt:"bg-comic"})}),Object(ee.jsxs)("div",{className:"comic-info-block",children:[Object(ee.jsx)("div",{className:"close",children:Object(ee.jsx)(K.a,{color:"primary","aria-label":"close",component:"span",onClick:c,children:Object(ee.jsx)(Z.a,{})})}),Object(ee.jsx)(Q.a,{maxWidth:"lg",className:"comic-info",children:Object(ee.jsxs)(W.a,{container:!0,spacing:2,direction:"column",children:[Object(ee.jsx)(W.a,{item:!0,xs:12,className:"title-modal-mobile",children:Object(ee.jsxs)(G.a,{variant:"h4",children:[t.title," - ",t.id]})}),Object(ee.jsx)(W.a,{item:!0,children:Object(ee.jsxs)(W.a,{container:!0,justify:"space-between",alignItems:"flex-start",spacing:4,children:[Object(ee.jsx)(W.a,{item:!0,xs:12,sm:4,md:3,className:"image-block",children:Object(ee.jsx)("img",{src:"".concat(t.thumbnail.path,".").concat(t.thumbnail.extension),alt:t.title})}),Object(ee.jsx)(W.a,{item:!0,xs:12,sm:8,md:9,children:Object(ee.jsxs)(W.a,{container:!0,direction:"column",spacing:4,children:[Object(ee.jsx)(W.a,{item:!0,className:"title-modal-default",children:Object(ee.jsxs)(G.a,{variant:"h4",children:[t.title," - ",t.id]})}),t.creators.available>0&&Object(ee.jsxs)(ee.Fragment,{children:[t.creators.items.filter((function(e){return e.role.includes("writer")})).length>0&&Object(ee.jsxs)(W.a,{item:!0,children:[Object(ee.jsx)(G.a,{variant:"h6",children:"Writer"}),Object(ee.jsx)(G.a,{variant:"body1",children:t.creators.items.filter((function(e){return e.role.includes("writer")})).map((function(e){return e.name})).join(", ")})]}),t.creators.items.filter((function(e){return e.role.includes("penciller")})).length>0&&Object(ee.jsxs)(W.a,{item:!0,children:[Object(ee.jsx)(G.a,{variant:"h6",children:"Penciler"}),Object(ee.jsx)(G.a,{variant:"body1",children:t.creators.items.filter((function(e){return e.role.includes("penciller")})).map((function(e){return e.name})).join(", ")})]}),t.creators.items.filter((function(e){return e.role.includes("editor")})).length>0&&Object(ee.jsxs)(W.a,{item:!0,children:[Object(ee.jsx)(G.a,{variant:"h6",children:"Editor"}),Object(ee.jsx)(G.a,{variant:"body1",children:t.creators.items.filter((function(e){return e.role.includes("editor")})).map((function(e){return e.name})).join(", ")})]})]}),t.description&&Object(ee.jsx)(W.a,{item:!0,children:Object(ee.jsx)(G.a,{variant:"body1",dangerouslySetInnerHTML:{__html:t.description}})}),t.prices.length>0&&Object(ee.jsx)(W.a,{item:!0,children:t.prices.map((function(e){return Object(ee.jsx)(G.a,{variant:"body2",children:"".concat(te(e.type),": $").concat(e.price)},e.type)}))}),t.pageCount>0&&Object(ee.jsx)(W.a,{item:!0,children:Object(ee.jsxs)(G.a,{variant:"body2",children:["Page count: ",t.pageCount]})})]})})]})})]})})]})]})},ae=(c(145),Object(l.b)((function(e){return{selectedComics:e.comics.selectedComics}}),(function(e){return Object(O.b)(a,e)}))((function(e){var t=e.index,c=e.params,a=e.selectedComics,i=e.removeSelectedComics,s=e.addSelectedComics,r=c.info,l=Object(n.useState)(!1),o=Object(h.a)(l,2),j=o[0],d=o[1],m=Object(n.useState)(!1),b=Object(h.a)(m,2),u=b[0],O=b[1];Object(n.useEffect)((function(){d(a.some((function(e){return e.id===r.id})))}),[r,a]);var x=function(){O(!u)};return Object(ee.jsxs)(W.a,{item:!0,xs:12,sm:6,md:3,className:"card-comic",children:[Object(ee.jsxs)(R.a,{children:[Object(ee.jsxs)(B.a,{children:[Object(ee.jsx)(z.a,{image:"".concat(r.thumbnail.path,".").concat(r.thumbnail.extension),title:r.title}),Object(ee.jsxs)(H.a,{children:[Object(ee.jsx)("div",{className:"title-content",children:Object(ee.jsx)(G.a,{gutterBottom:!0,variant:"h5",component:"h2",title:r.title,children:r.title})}),r.description&&Object(ee.jsx)("div",{className:"description-content",children:Object(ee.jsx)(G.a,{variant:"body2",color:"textSecondary",component:"p",title:r.description,children:r.description})})]})]}),Object(ee.jsxs)(J.a,{children:[Object(ee.jsx)(U.a,{control:Object(ee.jsx)(V.a,{checked:j,onChange:function(){a.some((function(e){return e.id===r.id}))?i([r]):s([r]),d(!j)},color:"primary"}),label:Object(ee.jsx)(G.a,{variant:"button",color:"primary","data-testid":"check-label-".concat(t),children:"Select comic"})}),Object(ee.jsx)(Y.a,{size:"small",color:"primary",onClick:x,"data-testid":"learn-more-".concat(t),children:"Learn More"})]})]}),Object(ee.jsx)($.a,{open:u,onClose:x,"aria-labelledby":"comic-model-title","aria-describedby":"comic-model-description",children:Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)(ce,{comic:r,close:x})})})]})}))),ne=c(215),ie=c(196),se=c(213),re=c(205),le=c(214),oe=(c(146),Object(l.b)((function(e){return{list:e.comics.list,selectedComics:e.comics.selectedComics}}))((function(e){var t=e.params,c=e.methods,a=e.list,i=e.selectedComics,s=t.form,r=c.handleSelectAllComics,l=c.handleChangeForm,o=Object(n.useState)(!1),j=Object(h.a)(o,2),d=j[0],m=j[1];return Object(n.useEffect)((function(){m(a.length>0&&a.filter((function(e){return i.find((function(t){return t.id===e.id}))})).length===a.length)}),[a,i]),Object(ee.jsxs)("div",{className:"filter",children:[Object(ee.jsx)("form",{children:Object(ee.jsxs)(W.a,{container:!0,spacing:2,justify:"center",children:[Object(ee.jsx)(W.a,{item:!0,xs:12,md:4,children:Object(ee.jsx)(ne.a,{name:"title",value:s.title,label:"Title",onChange:l,variant:"outlined",fullWidth:!0,inputProps:{"data-testid":"title"}})}),Object(ee.jsx)(W.a,{item:!0,xs:12,md:2,children:Object(ee.jsxs)(ie.a,{variant:"outlined",fullWidth:!0,children:[Object(ee.jsx)(se.a,{children:"Format"}),Object(ee.jsxs)(re.a,{name:"format",value:s.format,onChange:l,label:"Format",children:[Object(ee.jsx)(le.a,{value:"all",children:"All formats"}),Object(ee.jsx)(le.a,{value:"comic",children:"Comic"}),Object(ee.jsx)(le.a,{value:"magazine",children:"magazine"}),Object(ee.jsx)(le.a,{value:"trade paperback",children:"trade paperback"}),Object(ee.jsx)(le.a,{value:"hardcover",children:"hardcover"}),Object(ee.jsx)(le.a,{value:"digest",children:"digest"}),Object(ee.jsx)(le.a,{value:"graphic novel",children:"graphic novel"}),Object(ee.jsx)(le.a,{value:"digital comic",children:"digital comic"}),Object(ee.jsx)(le.a,{value:"infinit comic",children:"infinit comic"})]})]})}),Object(ee.jsx)(W.a,{item:!0,xs:12,md:2,children:Object(ee.jsxs)(ie.a,{variant:"outlined",fullWidth:!0,children:[Object(ee.jsx)(se.a,{children:"Type"}),Object(ee.jsxs)(re.a,{name:"type",value:s.type,onChange:l,label:"Type",children:[Object(ee.jsx)(le.a,{value:"all",children:"All types"}),Object(ee.jsx)(le.a,{value:"comic",children:"Comic"}),Object(ee.jsx)(le.a,{value:"collection",children:"collection"})]})]})}),Object(ee.jsx)(W.a,{item:!0,xs:12,md:2,children:Object(ee.jsxs)(ie.a,{variant:"outlined",fullWidth:!0,children:[Object(ee.jsx)(se.a,{children:"Order"}),Object(ee.jsxs)(re.a,{name:"order",value:s.order,onChange:l,label:"Order By",children:[Object(ee.jsx)(le.a,{value:"all",children:"Pattern"}),Object(ee.jsx)(le.a,{value:"focDate",children:"\u2191 Final Order Cutoff Date"}),Object(ee.jsx)(le.a,{value:"-focDate",children:"\u2193 Final Order Cutoff Date"}),Object(ee.jsx)(le.a,{value:"onsaleDate",children:"\u2191 On Sale Date"}),Object(ee.jsx)(le.a,{value:"-onsaleDate",children:"\u2193 onsaleDate"}),Object(ee.jsx)(le.a,{value:"title",children:"\u2191 Title"}),Object(ee.jsx)(le.a,{value:"-title",children:"\u2193 Title"}),Object(ee.jsx)(le.a,{value:"issueNumber",children:"\u2191 Issue Number"}),Object(ee.jsx)(le.a,{value:"-issueNumber",children:"\u2193 Issue Number"}),Object(ee.jsx)(le.a,{value:"modified",children:"\u2191 Modified"}),Object(ee.jsx)(le.a,{value:"-modified",children:"\u2193 Modified"})]})]})})]})}),Object(ee.jsx)(W.a,{container:!0,justify:"center",children:Object(ee.jsx)(W.a,{item:!0,xs:12,md:10,children:Object(ee.jsxs)(W.a,{container:!0,justify:"space-between",alignItems:"center",className:"selected-block",children:[Object(ee.jsx)(W.a,{item:!0,xs:12,sm:7,className:"selected-checkbox",children:Object(ee.jsx)(U.a,{control:Object(ee.jsx)(V.a,{checked:d,onChange:function(){return r(d?"desselectAll":"selectAll")},name:"allComics",color:"primary"}),label:"Select all comics on this page"})}),Object(ee.jsx)(W.a,{item:!0,xs:12,sm:5,className:"selected-total",children:Object(ee.jsx)(G.a,{variant:"body1",children:"Total comics selected: ".concat(i.length)})})]})})})]})}))),je=c(206),de=(c(148),function(e){var t=e.params,c=e.methods,a=t.total,n=t.page,i=t.limit,s=t.rangeComics,r=c.handleChangePage,l=c.handleChangeLimit;return Object(ee.jsx)("div",{className:"pagination",children:Object(ee.jsxs)(W.a,{container:!0,justify:"center",alignItems:"center",spacing:4,children:[Object(ee.jsx)(W.a,{item:!0,xs:12,sm:6,md:3,children:Object(ee.jsxs)(W.a,{container:!0,justify:"center",alignItems:"center",spacing:2,children:[Object(ee.jsx)(W.a,{item:!0,children:Object(ee.jsx)(G.a,{variant:"body1",children:"Comics by page: "})}),Object(ee.jsx)(W.a,{item:!0,children:Object(ee.jsx)(ie.a,{variant:"outlined",children:Object(ee.jsxs)(re.a,{value:i,onChange:l,children:[Object(ee.jsx)(le.a,{value:25,children:"25"}),Object(ee.jsx)(le.a,{value:50,children:"50"}),Object(ee.jsx)(le.a,{value:100,children:"100"})]})})})]})}),Object(ee.jsx)(W.a,{item:!0,xs:12,sm:6,md:2,children:Object(ee.jsxs)(G.a,{variant:"body1",align:"center",children:[Object(ee.jsx)(G.a,{variant:"body2",component:"b",children:s.first}),"-",Object(ee.jsx)(G.a,{variant:"body2",component:"b",children:s.last>a?a:s.last})," of ",Object(ee.jsx)(G.a,{variant:"body2",component:"b",children:a})]})}),Object(ee.jsx)(W.a,{item:!0,xs:12,md:4,children:Object(ee.jsx)(W.a,{container:!0,justify:"center",children:Object(ee.jsx)(W.a,{item:!0,children:Object(ee.jsx)(je.a,{color:"primary",count:Math.ceil(a/i),page:n,onChange:r})})})})]})})}),me=c(198),be=c(199),ue=c(210),he=c(211),Oe=c(200),xe=c(201),fe=c(202),pe=c(203),ge=(c(149),c(207)),ve=c(100),Ce=c.n(ve),ye=c.p+"static/media/marvel.0565fff5.svg";document.title="Marvel Comics";var Se=Object(l.b)((function(e){return{list:e.comics.list,selectedComics:e.comics.selectedComics,copyright:e.comics.copyright,rangeComics:e.comics.rangeComics,total:e.comics.total,mail:e.mail}}),(function(e){return Object(O.b)(a,e)}))((function(e){var t=e.list,c=e.selectedComics,a=e.copyright,i=e.rangeComics,s=e.total,r=e.addSelectedComics,o=e.clearSelectedComics,j=e.mail,d=Object(n.useState)(!0),m=Object(h.a)(d,2),O=m[0],x=m[1],f=Object(n.useState)(!0),p=Object(h.a)(f,2),g=p[0],v=p[1],C=Object(n.useState)({type:"",message:"",status:!1}),y=Object(h.a)(C,2),T=y[0],k=y[1],I=Object(n.useState)({mail:"",status:!1}),w=Object(h.a)(I,2),L=w[0],A=w[1],R=Object(n.useState)(1),B=Object(h.a)(R,2),z=B[0],H=B[1],J=Object(n.useState)(25),U=Object(h.a)(J,2),V=U[0],$=U[1],q=Object(n.useState)({title:"",format:"all",type:"all",order:"all"}),K=Object(h.a)(q,2),X=K[0],Z=K[1],te=Object(l.c)(),ce=Object(n.useCallback)((function(e){x(!0);var t=e||1,c={limit:V,offset:V*(t-1)};X.title&&(c.titleStartsWith=X.title),"all"!==X.format&&(c.format=X.format),"all"!==X.type&&(c.formatType=X.type),"all"!==X.order&&(c.orderBy=X.order),te(function(e,t,c){return function(a){return F.get("comics",e).then((function(e){var n=e.data;200===n.code?a(Object(D.a)([S(n.data.results),N(n.attributionText),E(c*t+1-c,c*t),M(n.data.total)])):console.log("Code: ".concat(n.code," - Status: ").concat(n.status))})).catch(console.log)}}({params:c},t,V))}),[X,V,te]);Object(n.useEffect)((function(){H(1),ce(1)}),[X,ce]),Object(n.useEffect)((function(){j.status&&j.message?o():j.message&&console.log(j.message),j.message&&k({type:j.status?"success":"error",message:j.status?"Success sending the comics":"Error sending the comics",status:!0}),v(!1)}),[j,o]),Object(n.useEffect)((function(){t.length&&x(!1)}),[t]);var ie=function(){A(Object(u.a)(Object(u.a)({},L),{},{status:!1}))};return Object(ee.jsxs)("div",{className:"page-comics",children:[Object(ee.jsx)("div",{className:"logo-block",children:Object(ee.jsx)(Q.a,{maxWidth:"lg",children:Object(ee.jsx)("img",{src:ye,alt:"Marvel Comics",id:"logo"})})}),Object(ee.jsx)("div",{className:"filter-block",children:Object(ee.jsx)(Q.a,{maxWidth:"lg",children:Object(ee.jsx)(oe,{params:{form:X},methods:{handleSelectAllComics:function(e){"selectAll"===e?r(t):o(t)},handleChangeForm:function(e){Z(Object(u.a)(Object(u.a)({},X),{},Object(b.a)({},e.target.name,e.target.value)))}},list:t})})}),Object(ee.jsx)(Q.a,{maxWidth:"lg",className:"block-comics-list",children:O?Object(ee.jsx)("div",{className:"loading",children:Object(ee.jsx)(me.a,{})}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(W.a,{container:!0,spacing:4,justify:"space-evenly",alignItems:"flex-start",children:t.map((function(e,t){return Object(ee.jsx)(ae,{index:t,params:{info:e}},e.id)}))}),Object(ee.jsxs)(be.a,{variant:"extended",color:"primary",onClick:function(){c.length?(v(!0),A(Object(u.a)(Object(u.a)({},L),{},{status:!0}))):k({type:"warning",message:"Select some comic!",status:!0})},className:"fab-send-to-mail","data-testid":"fab-to-mail",children:[g?Object(ee.jsx)(me.a,{className:"loading-button"}):Object(ee.jsx)(Ce.a,{}),Object(ee.jsx)(G.a,{variant:"button",children:"To email"})]}),Object(ee.jsx)(de,{params:{total:s,page:z,limit:V,rangeComics:i},methods:{handleChangePage:function(e,t){H(t),ce(t)},handleChangeLimit:function(e){$(e.target.value),ce(e.target.value)}}})]})}),Object(ee.jsx)("footer",{children:Object(ee.jsx)(Q.a,{maxWidth:"lg",children:Object(ee.jsx)(G.a,{variant:"caption",align:"center",component:"p",children:Object(ee.jsx)("a",{href:"https://www.marvel.com/comics",children:a})})})}),Object(ee.jsx)(ue.a,{open:T.status,autoHideDuration:6e3,onClose:function(){return k(Object(u.a)(Object(u.a)({},T),{},{status:!1}))},children:Object(ee.jsx)(ge.a,{elevation:6,variant:"filled",severity:T.type,onClose:function(){return k(Object(u.a)(Object(u.a)({},T),{},{status:!1}))},children:T.message})}),Object(ee.jsxs)(he.a,{open:L.status,onClose:ie,"aria-labelledby":"form-dialog-title",children:[Object(ee.jsx)(Oe.a,{id:"form-dialog-title",children:"Send all comics to email"}),Object(ee.jsxs)(xe.a,{children:[Object(ee.jsx)(fe.a,{children:"Enter your email to receive all marked comics."}),Object(ee.jsx)(ne.a,{autoFocus:!0,margin:"dense",label:"Email Address",type:"email",fullWidth:!0,value:L.mail,onChange:function(e){return A(Object(u.a)(Object(u.a)({},L),{},{mail:e.target.value}))},"data-testid":"email"})]}),Object(ee.jsxs)(pe.a,{children:[Object(ee.jsx)(Y.a,{onClick:function(){ie(),v(!1)},color:"primary",children:"Cancel"}),Object(ee.jsx)(Y.a,{onClick:function(){te(function(e,t){return function(c){return _.post("/sendMail",{mail:e,comics:t}).then((function(e){e.data.success?c(P(!0,"Success")):c(P(!1,e.data.message))})).catch((function(e){return c(P(!1,e.message))}))}}(L.mail,c)),ie()},color:"primary","data-testid":"send-email",children:"Send"})]})]})]})})),Ne=(c(150),c(101)),Ee=c(66),Te={list:[],copyright:"",rangeComics:{first:"?",last:"?"},selectedComics:[],total:0};var ke={status:!0,message:""};var Ie=Object(O.c)({comics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(u.a)(Object(u.a)({},e),{},{list:t.list});case f:return Object(u.a)(Object(u.a)({},e),{},{copyright:t.text});case p:return Object(u.a)(Object(u.a)({},e),{},{rangeComics:{first:t.first,last:t.last}});case g:return Object(u.a)(Object(u.a)({},e),{},{selectedComics:Object(Ee.a)(new Set([].concat(Object(Ee.a)(e.selectedComics),Object(Ee.a)(t.comics))))});case v:return Object(u.a)(Object(u.a)({},e),{},{selectedComics:e.selectedComics.filter((function(e){return!t.comics.some((function(t){return e.id===t.id}))}))});case C:return Object(u.a)(Object(u.a)({},e),{},{selectedComics:[]});case y:return Object(u.a)(Object(u.a)({},e),{},{total:t.total});default:return e}},mail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return t;default:return e}}}),Me=Object(O.d)(Object(D.b)(Ie),Object(O.a)(Ne.a)),De=Object(d.a)({palette:{primary:{main:"#ed1d24"}}});var we=function(){return Object(ee.jsx)(l.a,{store:Me,children:Object(ee.jsx)(m.a,{theme:De,children:Object(ee.jsx)(o.a,{children:Object(ee.jsx)(j.c,{children:Object(ee.jsx)(j.a,{path:"/MarvelComics",exact:!0,component:Se})})})})})},Le=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,216)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),i(e),s(e)}))};r.a.render(Object(ee.jsx)(i.a.StrictMode,{children:Object(ee.jsx)(we,{})}),document.getElementById("root")),Le()}},[[152,1,2]]]);
//# sourceMappingURL=main.92d79c72.chunk.js.map